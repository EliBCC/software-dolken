!!! warning "These module docs are in beta and may be incomplete."

# modm:architecture:assert: Assertions

These functions allow you to assert a condition at runtime and define
failure handlers in your application that can decide what to do with this
assertion and provide custom functionality.

Each assertion has the form `modm_assert(condition, module, location, failure)`,
where the condition is a boolean and rest are strings, so that a simple
string compare can be used to match for module, location or failure.
For example, the identifier `"can", "init", "timeout"` describes a timeout
failure in the CAN initializer function.
The assert `modm_assert_debug(condition, module, location, failure)` is only
available on debug builds and is removed from the code for a release build.

The user can define one or multiple assertion handlers in any part of the
application using the `MODM_ASSERTION_HANDLER(function)` macro.
All assertion handlers will be executed when an assertion fails anywhere in
the code and get passed the identifier string.

!!!note
	The order of assertion handler execution is undefined and must not been
	relied upon for any functionality!

!!!warning
	Assertion handlers may be executed in interrupt context!

Depending on the information in the failure identifier, the assertion handler
returns `Abandonment::DontCare` if the failure is not of interest, or
`Abandonment::Ignore` for recoverable failures, or `Abandonment::Fail` for
failures that do not allow normal program continuation.
The program is aborted, if any assertion handler returns `Abandonment::Fail`,
all assertion handlers return `Abandonment::DontCare` or no assertion
handlers have been defined in the application.
Only if one or many assertion handlers return `Abandonment::Ignore` and the
remainder returns `Abandonment::DontCare`, only then is the assertion ignored.

!!!note
	It is intended that the assertion handlers do not block (forever), so that
	all assertion handlers can get called.

On program abandonment `modm_abandon(module, location, failure)` is called,
which exits the program silently by default.
Only on hosted an formatted error string is output by default.
It is therefore recommended to overwrite this function on embedded targets
for custom behavior like blinking an LED and printing to a serial connection.

!!!warning
	The abandonment handler may also be executed in interrupt context!






## Dependencies

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: modm:architecture:assert Pages: 1 -->
<svg width="282pt" height="239pt"
 viewBox="0.00 0.00 281.50 239.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 235)">
<title>modm:architecture:assert</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-235 277.5,-235 277.5,4 -4,4"/>
<!-- modm_architecture_assert -->
<g id="node1" class="node"><title>modm_architecture_assert</title>
<polygon fill="lightgrey" stroke="black" stroke-width="2" points="183.5,-142 99.5,-142 99.5,-89 183.5,-89 183.5,-142"/>
<text text-anchor="middle" x="141.5" y="-126.8" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="141.5" y="-111.8" font-family="Times New Roman,serif" font-size="14.00">architecture:</text>
<text text-anchor="middle" x="141.5" y="-96.8" font-family="Times New Roman,serif" font-size="14.00">assert</text>
</g>
<!-- modm_architecture -->
<g id="node2" class="node"><title>modm_architecture</title>
<g id="a_node2"><a xlink:href="../modm-architecture" xlink:title="modm:
architecture">
<polygon fill="lightgrey" stroke="black" points="81,-223.5 0,-223.5 0,-185.5 81,-185.5 81,-223.5"/>
<text text-anchor="middle" x="40.5" y="-208.3" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="40.5" y="-193.3" font-family="Times New Roman,serif" font-size="14.00">architecture</text>
</a>
</g>
</g>
<!-- modm_architecture_assert&#45;&gt;modm_architecture -->
<g id="edge1" class="edge"><title>modm_architecture_assert&#45;&gt;modm_architecture</title>
<path fill="none" stroke="black" d="M111.743,-142.132C98.3469,-153.672 82.5938,-167.241 69.3117,-178.682"/>
<polygon fill="black" stroke="black" points="66.6967,-176.315 61.4043,-185.493 71.2652,-181.619 66.6967,-176.315"/>
</g>
<!-- modm_architecture_accessor -->
<g id="node3" class="node"><title>modm_architecture_accessor</title>
<g id="a_node3"><a xlink:href="../modm-architecture-accessor" xlink:title="modm:
architecture:
accessor">
<polygon fill="lightgrey" stroke="black" points="183.5,-231 99.5,-231 99.5,-178 183.5,-178 183.5,-231"/>
<text text-anchor="middle" x="141.5" y="-215.8" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="141.5" y="-200.8" font-family="Times New Roman,serif" font-size="14.00">architecture:</text>
<text text-anchor="middle" x="141.5" y="-185.8" font-family="Times New Roman,serif" font-size="14.00">accessor</text>
</a>
</g>
</g>
<!-- modm_architecture_assert&#45;&gt;modm_architecture_accessor -->
<g id="edge2" class="edge"><title>modm_architecture_assert&#45;&gt;modm_architecture_accessor</title>
<path fill="none" stroke="black" d="M141.5,-142.132C141.5,-150.114 141.5,-159.068 141.5,-167.616"/>
<polygon fill="black" stroke="black" points="138,-167.75 141.5,-177.75 145,-167.75 138,-167.75"/>
</g>
<!-- modm_utils -->
<g id="node4" class="node"><title>modm_utils</title>
<g id="a_node4"><a xlink:href="../modm-utils" xlink:title="modm:
utils">
<polygon fill="lightgrey" stroke="black" points="257.5,-223.5 201.5,-223.5 201.5,-185.5 257.5,-185.5 257.5,-223.5"/>
<text text-anchor="middle" x="229.5" y="-208.3" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="229.5" y="-193.3" font-family="Times New Roman,serif" font-size="14.00">utils</text>
</a>
</g>
</g>
<!-- modm_architecture_assert&#45;&gt;modm_utils -->
<g id="edge3" class="edge"><title>modm_architecture_assert&#45;&gt;modm_utils</title>
<path fill="none" stroke="black" d="M167.427,-142.132C178.989,-153.563 192.565,-166.985 204.069,-178.358"/>
<polygon fill="black" stroke="black" points="201.714,-180.952 211.286,-185.493 206.636,-175.974 201.714,-180.952"/>
</g>
<!-- modm_platform_can -->
<g id="node5" class="node"><title>modm_platform_can</title>
<g id="a_node5"><a xlink:href="../modm-platform-can" xlink:title="modm:
platform:
can">
<polygon fill="lightgrey" stroke="black" points="90,-53 23,-53 23,-0 90,-0 90,-53"/>
<text text-anchor="middle" x="56.5" y="-37.8" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="56.5" y="-22.8" font-family="Times New Roman,serif" font-size="14.00">platform:</text>
<text text-anchor="middle" x="56.5" y="-7.8" font-family="Times New Roman,serif" font-size="14.00">can</text>
</a>
</g>
</g>
<!-- modm_platform_can&#45;&gt;modm_architecture_assert -->
<g id="edge4" class="edge"><title>modm_platform_can&#45;&gt;modm_architecture_assert</title>
<path fill="none" stroke="black" d="M81.5431,-53.1323C90.1986,-61.9915 100.023,-72.0474 109.179,-81.4181"/>
<polygon fill="black" stroke="black" points="106.85,-84.0434 116.342,-88.7503 111.857,-79.1515 106.85,-84.0434"/>
</g>
<!-- modm_platform_core -->
<g id="node6" class="node"><title>modm_platform_core</title>
<g id="a_node6"><a xlink:href="../modm-platform-core" xlink:title="modm:
platform:
core">
<polygon fill="lightgrey" stroke="black" points="175,-53 108,-53 108,-0 175,-0 175,-53"/>
<text text-anchor="middle" x="141.5" y="-37.8" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="141.5" y="-22.8" font-family="Times New Roman,serif" font-size="14.00">platform:</text>
<text text-anchor="middle" x="141.5" y="-7.8" font-family="Times New Roman,serif" font-size="14.00">core</text>
</a>
</g>
</g>
<!-- modm_platform_core&#45;&gt;modm_architecture_assert -->
<g id="edge5" class="edge"><title>modm_platform_core&#45;&gt;modm_architecture_assert</title>
<path fill="none" stroke="black" d="M141.5,-53.1323C141.5,-61.1144 141.5,-70.0679 141.5,-78.6164"/>
<polygon fill="black" stroke="black" points="138,-78.7502 141.5,-88.7503 145,-78.7503 138,-78.7502"/>
</g>
<!-- modm_processing_resumable -->
<g id="node7" class="node"><title>modm_processing_resumable</title>
<g id="a_node7"><a xlink:href="../modm-processing-resumable" xlink:title="modm:
processing:
resumable">
<polygon fill="lightgrey" stroke="black" points="273.5,-53 193.5,-53 193.5,-0 273.5,-0 273.5,-53"/>
<text text-anchor="middle" x="233.5" y="-37.8" font-family="Times New Roman,serif" font-size="14.00">modm:</text>
<text text-anchor="middle" x="233.5" y="-22.8" font-family="Times New Roman,serif" font-size="14.00">processing:</text>
<text text-anchor="middle" x="233.5" y="-7.8" font-family="Times New Roman,serif" font-size="14.00">resumable</text>
</a>
</g>
</g>
<!-- modm_processing_resumable&#45;&gt;modm_architecture_assert -->
<g id="edge6" class="edge"><title>modm_processing_resumable&#45;&gt;modm_architecture_assert</title>
<path fill="none" stroke="black" d="M206.395,-53.1323C196.933,-62.0792 186.182,-72.2467 176.189,-81.6962"/>
<polygon fill="black" stroke="black" points="173.591,-79.3363 168.73,-88.7503 178.4,-84.4224 173.591,-79.3363"/>
</g>
</g>
</svg>

